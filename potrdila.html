<!doctype html>
<html lang="sl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>eP - potrdila</title>
  <style>
    body{font-family: Arial, sans-serif; padding:20px; background:#f7f7f7}
    .card{background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.06);max-width:900px;margin:0 auto}
    label{display:block;margin-top:10px;font-weight:600}
    input, select{width:100%;padding:8px;margin-top:6px;border:1px solid #ccc;border-radius:4px}
    .row{display:flex;gap:12px}
    .col{flex:1}
    button{margin-top:14px;padding:10px 16px;border:0;border-radius:6px;background:#2563eb;color:#fff;font-weight:700;cursor:pointer}
    small{color:#666}
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="card">
    <h2>eP - potrdila</h2>
    <label>Sifra uCenca</label>
    <input id="studentCode" />
    <label>Predmet</label>
    <select id="subject">
      <option value="SLJ">SLJ</option>
      <option value="MAT">MAT</option>
      <option value="ISZ">ISZ</option>
    </select>
    <label>Tip ocene</label>
    <select id="gradeType">
      <option value="PISNA OCENA">PISNA OCENA</option>
      <option value="USTNA OCENA">USTNA OCENA</option>
      <option value="IZDELEK">IZDELEK</option>
      <option value="KONCNA OCENA">KONCNA OCENA</option>
    </select>
    <div class="row">
      <div class="col">
        <label>Dosezene tocke</label>
        <input id="pointsGot" type="number" />
      </div>
      <div class="col">
        <label>Mozne tocke</label>
        <input id="pointsMax" type="number" />
      </div>
    </div>
    <button id="finalizeBtn">ZAKLJCI IN PRENESI PDF</button>
  </div>
<script>
const { jsPDF } = window.jspdf;
const studentCode = document.getElementById('studentCode');
const gradeType = document.getElementById('gradeType');
const subject = document.getElementById('subject');
const pointsGot = document.getElementById('pointsGot');
const pointsMax = document.getElementById('pointsMax');
const finalizeBtn = document.getElementById('finalizeBtn');
let finalized = false;
function calc(g,m){const p=(g/m)*100;let gr='';if(p<=44)gr='nzd (1)';else if(p<=59)gr='zd (2)';else if(p<=75)gr='db (3)';else if(p<=89)gr='pdb (4)';else gr='odl (5)';return{pct:Math.round(p),grade:gr}};
function valid(){return studentCode.value && pointsGot.value>0 && pointsMax.value>0}
function generatePDF(){if(!valid()||finalized)return;finalized=true;const code=studentCode.value;const type=gradeType.value;const got=parseFloat(pointsGot.value);const max=parseFloat(pointsMax.value);const cg=calc(got,max);const doc=new jsPDF({unit:'pt',format:'a4'});const pageWidth=doc.internal.pageSize.getWidth();const pageHeight=doc.internal.pageSize.getHeight();const margin=28;doc.setFont('times','normal');doc.setFontSize(12);doc.rect(margin,margin,pageWidth-2*margin,pageHeight-2*margin);let y=margin+40;doc.setFont('times','bold');doc.setFontSize(16);doc.text('POTRDILO O PRIDOBLJENI OCENI',pageWidth/2,y,{align:'center'});y+=40;function line(t,b){doc.setFont('times','normal');doc.text(t+':',margin+20,y);doc.setFont('times','bold');doc.text(b,margin+150,y);y+=20;}line('Sifra ucenca',code);line('Predmet',subject.value);
      line('Tip ocene',type);
      line('Dosezene tocke',String(got));
      line('Mozne tocke',String(max));
      line('Dosezeni procenti',String(cg.pct)+'%');
      line('Dodeljena ocena',cg.grade);line('Dosezene tocke',String(got));line('Mozne tocke',String(max));line('Dosezeni procenti',String(cg.pct)+'%');line('Dodeljena ocena',cg.grade);y+=20;doc.setFont('times','normal');doc.text('To potrdilo je generirano avtomatsko in ne potrebuje podpisa.',margin+20,y);const fileName=`potrdilo_${code}.pdf`;doc.save(fileName);}
finalizeBtn.addEventListener('click',generatePDF);
</script>
</body>
</html>
